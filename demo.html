<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>NCI线路规划Demo</title>
	<style>
		body { margin: 0; font: 13px/1.5 "Microsoft YaHei", "Helvetica Neue", "Sans-Serif"; min-height: 1920px; min-width: 1080px; }
		.my-map { margin: 0 auto; width: 1920px; height: 1080px; }
		.amap-container{height: 100%;}
	</style>
</head>
<body>
	<div id="wrap" class="my-map">
		<div id="mapContainer"></div>
	</div>
	<script src="//webapi.amap.com/maps?v=1.3&key=8325164e247e15eea68b59e89200988b"></script>
	<script>
	!function(){
		var infoWindow, map, level = 14,
			center = {lng: 118.762727, lat: 31.987446},
            features = [
            {
                type: "Polyline", name: "原始路线", desc: "原始路线", strokeWeight: 10, strokeColor: "#19A4EB", strokeOpacity: 0.8,
                lnglat:[{lng:118.869354,lat:32.039154},{lng:118.869064,lat:32.038952},{lng:118.868713,lat:32.038712},{lng:118.868675,lat:32.038692},{lng:118.868065,lat:32.038372},{lng:118.867455,lat:32.038116},{lng:118.867126,lat:32.037998},{lng:118.866798,lat:32.037872},{lng:118.866402,lat:32.037735},{lng:118.865616,lat:32.037457},{lng:118.865196,lat:32.037281},{lng:118.864647,lat:32.037037},{lng:118.86441,lat:32.036915},{lng:118.863091,lat:32.036243},{lng:118.862808,lat:32.036133},{lng:118.862801,lat:32.036125},{lng:118.862709,lat:32.036098},{lng:118.86248,lat:32.036037},{lng:118.862198,lat:32.035988},{lng:118.861664,lat:32.035946},{lng:118.860771,lat:32.03587},{lng:118.859512,lat:32.035732},{lng:118.85923,lat:32.035706},{lng:118.858826,lat:32.03566},{lng:118.858749,lat:32.035652},{lng:118.858452,lat:32.035614},{lng:118.857582,lat:32.035511},{lng:118.856667,lat:32.035419},{lng:118.856232,lat:32.035408},{lng:118.855927,lat:32.035423},{lng:118.855675,lat:32.035465},{lng:118.855164,lat:32.035591},{lng:118.85479,lat:32.035694},{lng:118.853912,lat:32.035938},{lng:118.853912,lat:32.035942},{lng:118.853226,lat:32.036133},{lng:118.852989,lat:32.036194},{lng:118.85273,lat:32.03627},{lng:118.852165,lat:32.03643},{lng:118.851936,lat:32.036503},{lng:118.85112,lat:32.036751},{lng:118.851074,lat:32.036648},{lng:118.85096,lat:32.036442},{lng:118.850784,lat:32.036133},{lng:118.850685,lat:32.035942},{lng:118.850479,lat:32.035568},{lng:118.85051,lat:32.035145},{lng:118.85051,lat:32.035141},{lng:118.85054,lat:32.034714},{lng:118.850548,lat:32.034592},{lng:118.850578,lat:32.034126},{lng:118.850853,lat:32.030464},{lng:118.850891,lat:32.029991},{lng:118.850891,lat:32.029987},{lng:118.85096,lat:32.029133},{lng:118.850967,lat:32.029045},{lng:118.851105,lat:32.026863},{lng:118.851112,lat:32.026649},{lng:118.851112,lat:32.026646},{lng:118.851219,lat:32.025143},{lng:118.851265,lat:32.024395},{lng:118.851341,lat:32.023533},{lng:118.850594,lat:32.023506},{lng:118.850098,lat:32.023476},{lng:118.849602,lat:32.023441},{lng:118.849144,lat:32.02343},{lng:118.84906,lat:32.023426},{lng:118.848686,lat:32.023403},{lng:118.848412,lat:32.023388},{lng:118.847641,lat:32.023361},{lng:118.847244,lat:32.023342},{lng:118.847076,lat:32.023338},{lng:118.846664,lat:32.023331},{lng:118.846436,lat:32.023323},{lng:118.845741,lat:32.023319},{lng:118.844864,lat:32.023323},{lng:118.844757,lat:32.023273},{lng:118.844948,lat:32.022442},{lng:118.845024,lat:32.022118},{lng:118.845184,lat:32.021301},{lng:118.845337,lat:32.020496},{lng:118.84539,lat:32.02029},{lng:118.845444,lat:32.019695},{lng:118.845428,lat:32.019497},{lng:118.845367,lat:32.01902},{lng:118.845337,lat:32.018883},{lng:118.84523,lat:32.01852},{lng:118.845085,lat:32.018009},{lng:118.844986,lat:32.017693},{lng:118.844803,lat:32.01709},{lng:118.844749,lat:32.016911},{lng:118.844666,lat:32.016663},{lng:118.844505,lat:32.016201},{lng:118.844429,lat:32.015884},{lng:118.844353,lat:32.015591},{lng:118.844223,lat:32.014935},{lng:118.844009,lat:32.014156},{lng:118.843918,lat:32.013859},{lng:118.843803,lat:32.013504},{lng:118.843483,lat:32.012539},{lng:118.843292,lat:32.01207},{lng:118.842903,lat:32.011162},{lng:118.842613,lat:32.010479},{lng:118.842552,lat:32.010338},{lng:118.842194,lat:32.009422},{lng:118.841789,lat:32.008411},{lng:118.84169,lat:32.008141},{lng:118.841476,lat:32.007233},{lng:118.841278,lat:32.006458},{lng:118.841225,lat:32.006203},{lng:118.841209,lat:32.005997},{lng:118.841232,lat:32.00576},{lng:118.841339,lat:32.00547},{lng:118.841415,lat:32.005352},{lng:118.84201,lat:32.004723},{lng:118.842117,lat:32.004681},{lng:118.842255,lat:32.004562},{lng:118.842545,lat:32.004322},{lng:118.842842,lat:32.004131},{lng:118.843063,lat:32.004021},{lng:118.84346,lat:32.00388},{lng:118.844055,lat:32.003654},{lng:118.84417,lat:32.003613},{lng:118.844711,lat:32.003387},{lng:118.845001,lat:32.003246},{lng:118.845139,lat:32.003174},{lng:118.84523,lat:32.003117},{lng:118.845772,lat:32.002796},{lng:118.846207,lat:32.002491},{lng:118.848015,lat:32.001125},{lng:118.849129,lat:32.000275},{lng:118.849274,lat:32.000168},{lng:118.849487,lat:32.0},{lng:118.849556,lat:31.999918},{lng:118.849617,lat:31.99984},{lng:118.849709,lat:31.999586},{lng:118.849731,lat:31.999548},{lng:118.849976,lat:31.999125},{lng:118.850006,lat:31.999041},{lng:118.850098,lat:31.998806},{lng:118.850166,lat:31.998615},{lng:118.850304,lat:31.998264},{lng:118.850487,lat:31.997843},{lng:118.850548,lat:31.997728},{lng:118.850685,lat:31.997564},{lng:118.850998,lat:31.997244},{lng:118.851212,lat:31.997044},{lng:118.852257,lat:31.996046},{lng:118.852348,lat:31.99597},{lng:118.852554,lat:31.995773},{lng:118.853226,lat:31.995142},{lng:118.853325,lat:31.99506},{lng:118.85405,lat:31.994371},{lng:118.854729,lat:31.993767},{lng:118.855019,lat:31.993475},{lng:118.855286,lat:31.993233},{lng:118.85569,lat:31.992809},{lng:118.856216,lat:31.992188},{lng:118.856224,lat:31.992174},{lng:118.856537,lat:31.991804},{lng:118.856712,lat:31.991615},{lng:118.856972,lat:31.991394},{lng:118.858063,lat:31.990486},{lng:118.858971,lat:31.989653},{lng:118.858986,lat:31.989635},{lng:118.860268,lat:31.988464},{lng:118.862007,lat:31.986904},{lng:118.862808,lat:31.986242},{lng:118.863281,lat:31.985828},{lng:118.863655,lat:31.985491},{lng:118.863663,lat:31.985395},{lng:118.864204,lat:31.9849},{lng:118.864258,lat:31.984858},{lng:118.864792,lat:31.984367},{lng:118.865166,lat:31.984026},{lng:118.866844,lat:31.982573},{lng:118.867218,lat:31.982244},{lng:118.868256,lat:31.981325},{lng:118.868401,lat:31.981197},{lng:118.869225,lat:31.980465},{lng:118.869568,lat:31.98016},{lng:118.869904,lat:31.979862},{lng:118.870277,lat:31.979536},{lng:118.870872,lat:31.978989},{lng:118.870956,lat:31.978916},{lng:118.871643,lat:31.978277},{lng:118.87207,lat:31.9779},{lng:118.872124,lat:31.977846},{lng:118.872986,lat:31.977072},{lng:118.873627,lat:31.976458},{lng:118.874039,lat:31.97608},{lng:118.874153,lat:31.975973},{lng:118.874466,lat:31.975706},{lng:118.874748,lat:31.975464},{lng:118.874809,lat:31.975418},{lng:118.874863,lat:31.975374},{lng:118.874939,lat:31.975309},{lng:118.875282,lat:31.97504},{lng:118.87587,lat:31.974518},{lng:118.877251,lat:31.973307},{lng:118.876808,lat:31.972979},{lng:118.87648,lat:31.972696},{lng:118.876305,lat:31.972504},{lng:118.876198,lat:31.972364},{lng:118.876083,lat:31.972172},{lng:118.876015,lat:31.972023},{lng:118.875946,lat:31.971544},{lng:118.875946,lat:31.970615},{lng:118.875984,lat:31.970434},{lng:118.876007,lat:31.970364},{lng:118.876007,lat:31.97036},{lng:118.876053,lat:31.970213},{lng:118.87606,lat:31.970196},{lng:118.876152,lat:31.969959},{lng:118.876266,lat:31.969753},{lng:118.876335,lat:31.969635},{lng:118.876587,lat:31.96928},{lng:118.876961,lat:31.968775},{lng:118.877075,lat:31.968616},{lng:118.877274,lat:31.968321},{lng:118.877869,lat:31.96756},{lng:118.878265,lat:31.967062},{lng:118.878296,lat:31.967022},{lng:118.878532,lat:31.966711},{lng:118.879288,lat:31.965706},{lng:118.879509,lat:31.965433},{lng:118.879562,lat:31.965364},{lng:118.879814,lat:31.965054},{lng:118.880028,lat:31.964804},{lng:118.880241,lat:31.964535},{lng:118.880325,lat:31.964413},{lng:118.880394,lat:31.964258},{lng:118.880516,lat:31.963911},{lng:118.880585,lat:31.963572},{lng:118.880585,lat:31.963556},{lng:118.880608,lat:31.963364},{lng:118.880615,lat:31.963047},{lng:118.880554,lat:31.962601},{lng:118.880531,lat:31.962458},{lng:118.880524,lat:31.962395},{lng:118.880348,lat:31.961485},{lng:118.880081,lat:31.960178},{lng:118.880066,lat:31.959917},{lng:118.880081,lat:31.959791},{lng:118.880028,lat:31.959778},{lng:118.8797,lat:31.959749},{lng:118.879288,lat:31.959705},{lng:118.878853,lat:31.959661}]
            },    
            {
                type: "Polyline", name: "规划后", desc: "规划后", strokeWeight: 5, strokeColor: "#F0202F", strokeOpacity: 0.8,
                lnglat:[{lng:118.85121118722962,lat:32.02525274386797},{lng:118.851219,lat:32.025143},{lng:118.851265,lat:32.024395},{lng:118.851341,lat:32.023533},{lng:118.850594,lat:32.023506},{lng:118.850098,lat:32.023476},{lng:118.849602,lat:32.023441},{lng:118.849144,lat:32.02343},{lng:118.84906,lat:32.023426},{lng:118.848686,lat:32.023403},{lng:118.848412,lat:32.023388},{lng:118.847641,lat:32.023361},{lng:118.847244,lat:32.023342},{lng:118.847076,lat:32.023338},{lng:118.846664,lat:32.023331},{lng:118.846436,lat:32.023323},{lng:118.845741,lat:32.023319},{lng:118.844864,lat:32.023323},{lng:118.844757,lat:32.023273},{lng:118.844948,lat:32.022442},{lng:118.845024,lat:32.022118},{lng:118.845184,lat:32.021301},{lng:118.845337,lat:32.020496},{lng:118.84539,lat:32.02029},{lng:118.845444,lat:32.019695},{lng:118.845428,lat:32.019497},{lng:118.845367,lat:32.01902},{lng:118.845337,lat:32.018883},{lng:118.84523,lat:32.01852},{lng:118.845085,lat:32.018009},{lng:118.844986,lat:32.017693},{lng:118.844803,lat:32.01709},{lng:118.844749,lat:32.016911},{lng:118.844666,lat:32.016663},{lng:118.844505,lat:32.016201},{lng:118.844429,lat:32.015884},{lng:118.844353,lat:32.015591},{lng:118.844223,lat:32.014935},{lng:118.844009,lat:32.014156},{lng:118.843918,lat:32.013859},{lng:118.843803,lat:32.013504},{lng:118.843483,lat:32.012539},{lng:118.843292,lat:32.01207},{lng:118.842903,lat:32.011162},{lng:118.842613,lat:32.010479},{lng:118.842552,lat:32.010338},{lng:118.842194,lat:32.009422},{lng:118.841789,lat:32.008411},{lng:118.84169,lat:32.008141},{lng:118.841476,lat:32.007233},{lng:118.841278,lat:32.006458},{lng:118.841225,lat:32.006203},{lng:118.841209,lat:32.005997},{lng:118.841232,lat:32.00576},{lng:118.841339,lat:32.00547},{lng:118.841415,lat:32.005352},{lng:118.84201,lat:32.004723},{lng:118.842117,lat:32.004681},{lng:118.842255,lat:32.004562},{lng:118.842545,lat:32.004322},{lng:118.842842,lat:32.004131},{lng:118.843063,lat:32.004021},{lng:118.84346,lat:32.00388},{lng:118.844055,lat:32.003654},{lng:118.84417,lat:32.003613},{lng:118.844711,lat:32.003387},{lng:118.845001,lat:32.003246},{lng:118.845139,lat:32.003174},{lng:118.84523,lat:32.003117},{lng:118.845772,lat:32.002796},{lng:118.846207,lat:32.002491},{lng:118.848015,lat:32.001125},{lng:118.849129,lat:32.000275},{lng:118.849274,lat:32.000168},{lng:118.849487,lat:32},{lng:118.849556,lat:31.999918},{lng:118.849617,lat:31.99984},{lng:118.849709,lat:31.999586},{lng:118.849731,lat:31.999548},{lng:118.849976,lat:31.999125},{lng:118.850006,lat:31.999041},{lng:118.850098,lat:31.998806},{lng:118.850166,lat:31.998615},{lng:118.850304,lat:31.998264},{lng:118.850487,lat:31.997843},{lng:118.850548,lat:31.997728},{lng:118.850685,lat:31.997564},{lng:118.850998,lat:31.997244},{lng:118.851212,lat:31.997044},{lng:118.852257,lat:31.996046},{lng:118.852348,lat:31.99597},{lng:118.852554,lat:31.995773},{lng:118.85311355331537,lat:31.99524758609823}]
            }];

		function loadFeatures(){
			for(var feature, data, i = 0, len = features.length, j, jl, path; i < len; i++){
				data = features[i];
				switch(data.type){
					case "Marker":
						feature = new AMap.Marker({ map: map, position: new AMap.LngLat(data.lnglat.lng, data.lnglat.lat),
							zIndex: 3, extData: data, offset: new AMap.Pixel(data.offset.x, data.offset.y), title: data.name,
							content: '<div class="icon icon-' + data.icon + ' icon-'+ data.icon +'-' + data.color +'"></div>' });
						break;
					case "Polyline":
						for(j = 0, jl = data.lnglat.length, path = []; j < jl; j++){
							path.push(new AMap.LngLat(data.lnglat[j].lng, data.lnglat[j].lat));
						}
						feature = new AMap.Polyline({ map: map, path: path, extData: data, zIndex: 2,
							strokeWeight: data.strokeWeight, strokeColor: data.strokeColor, strokeOpacity: data.strokeOpacity });
						break;
					case "Polygon":
						for(j = 0, jl = data.lnglat.length, path = []; j < jl; j++){
							path.push(new AMap.LngLat(data.lnglat[j].lng, data.lnglat[j].lat));
						}
						feature = new AMap.Polygon({ map: map, path: path, extData: data, zIndex: 1,
							strokeWeight: data.strokeWeight, strokeColor: data.strokeColor, strokeOpacity: data.strokeOpacity,
							fillColor: data.fillColor, fillOpacity: data.fillOpacity });
						break;
					default: feature = null;
				}
				if(feature){ AMap.event.addListener(feature, "click", mapFeatureClick); }
			}
		}

		function mapFeatureClick(e){
			if(!infoWindow){ infoWindow = new AMap.InfoWindow({autoMove: true}); }
			var extData = e.target.getExtData();
			infoWindow.setContent("<h5>" + extData.name + "</h5><div>" + extData.desc + "</div>");
			infoWindow.open(map, e.lnglat);
		}

		map = new AMap.Map("mapContainer", {center: new AMap.LngLat(center.lng, center.lat), level: level});
		
		loadFeatures();

		map.on('complete', function(){
			map.plugin(["AMap.ToolBar", "AMap.OverView", "AMap.Scale"], function(){
				map.addControl(new AMap.ToolBar);
			map.addControl(new AMap.OverView({isOpen: true}));
			map.addControl(new AMap.Scale);
			});	
		})
		
	}();
	</script>
</body>
</html>